(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();function ge(){}function Lt(e){return e()}function pt(){return Object.create(null)}function ve(e){e.forEach(Lt)}function zt(e){return typeof e=="function"}function Je(e,n){return e!=e?n==n:e!==n||e&&typeof e=="object"||typeof e=="function"}let Fe;function mt(e,n){return Fe||(Fe=document.createElement("a")),Fe.href=n,e===Fe.href}function Pt(e){return Object.keys(e).length===0}function xt(e,...n){if(e==null)return ge;const t=e.subscribe(...n);return t.unsubscribe?()=>t.unsubscribe():t}function O(e,n,t){e.$$.on_destroy.push(xt(n,t))}function ne(e,n,t){return e.set(t),n}const St=typeof window<"u";let gt=St?()=>window.performance.now():()=>Date.now(),Mt=St?e=>requestAnimationFrame(e):ge;const Ce=new Set;function Nt(e){Ce.forEach(n=>{n.c(e)||(Ce.delete(n),n.f())}),Ce.size!==0&&Mt(Nt)}function Ct(e){let n;return Ce.size===0&&Mt(Nt),{promise:new Promise(t=>{Ce.add(n={c:e,f:t})}),abort(){Ce.delete(n)}}}function d(e,n){e.appendChild(n)}function se(e,n,t){e.insertBefore(n,t||null)}function ee(e){e.parentNode&&e.parentNode.removeChild(e)}function Jt(e,n){for(let t=0;t<e.length;t+=1)e[t]&&e[t].d(n)}function y(e){return document.createElement(e)}function R(e){return document.createTextNode(e)}function J(){return R(" ")}function ft(){return R("")}function fe(e,n,t,r){return e.addEventListener(n,t,r),()=>e.removeEventListener(n,t,r)}function N(e,n,t){t==null?e.removeAttribute(n):e.getAttribute(n)!==t&&e.setAttribute(n,t)}function It(e){return Array.from(e.childNodes)}function ue(e,n){n=""+n,e.wholeText!==n&&(e.data=n)}function p(e,n,t,r){t===null?e.style.removeProperty(n):e.style.setProperty(n,t,r?"important":"")}let Qe;function Wt(){if(Qe===void 0){Qe=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Qe=!0}}return Qe}function Bt(e,n){getComputedStyle(e).position==="static"&&(e.style.position="relative");const r=y("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const o=Wt();let s;return o?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=fe(window,"message",i=>{i.source===r.contentWindow&&n()})):(r.src="about:blank",r.onload=()=>{s=fe(r.contentWindow,"resize",n)}),d(e,r),()=>{(o||s&&r.contentWindow)&&s(),ee(r)}}let Be;function Ie(e){Be=e}function jt(){if(!Be)throw new Error("Function called outside component initialization");return Be}function qt(e){jt().$$.on_mount.push(e)}function Gt(e){jt().$$.on_destroy.push(e)}const De=[],ht=[],Ke=[],_t=[],Ht=Promise.resolve();let lt=!1;function Zt(){lt||(lt=!0,Ht.then(Ot))}function $e(e){Ke.push(e)}const it=new Set;let Xe=0;function Ot(){if(Xe!==0)return;const e=Be;do{try{for(;Xe<De.length;){const n=De[Xe];Xe++,Ie(n),Rt(n.$$)}}catch(n){throw De.length=0,Xe=0,n}for(Ie(null),De.length=0,Xe=0;ht.length;)ht.pop()();for(let n=0;n<Ke.length;n+=1){const t=Ke[n];it.has(t)||(it.add(t),t())}Ke.length=0}while(De.length);for(;_t.length;)_t.pop()();lt=!1,it.clear(),Ie(e)}function Rt(e){if(e.fragment!==null){e.update(),ve(e.before_update);const n=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,n),e.after_update.forEach($e)}}const Ve=new Set;let je;function Ft(){je={r:0,c:[],p:je}}function Qt(){je.r||ve(je.c),je=je.p}function $(e,n){e&&e.i&&(Ve.delete(e),e.i(n))}function re(e,n,t,r){if(e&&e.o){if(Ve.has(e))return;Ve.add(e),je.c.push(()=>{Ve.delete(e),r&&(t&&e.d(1),r())}),e.o(n)}else r&&r()}function de(e){e&&e.c()}function ie(e,n,t,r){const{fragment:o,after_update:s}=e.$$;o&&o.m(n,t),r||$e(()=>{const i=e.$$.on_mount.map(Lt).filter(zt);e.$$.on_destroy?e.$$.on_destroy.push(...i):ve(i),e.$$.on_mount=[]}),s.forEach($e)}function le(e,n){const t=e.$$;t.fragment!==null&&(ve(t.on_destroy),t.fragment&&t.fragment.d(n),t.on_destroy=t.fragment=null,t.ctx=[])}function Kt(e,n){e.$$.dirty[0]===-1&&(De.push(e),Zt(),e.$$.dirty.fill(0)),e.$$.dirty[n/31|0]|=1<<n%31}function Ge(e,n,t,r,o,s,i,c=[-1]){const b=Be;Ie(e);const l=e.$$={fragment:null,ctx:[],props:s,update:ge,not_equal:o,bound:pt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(b?b.$$.context:[])),callbacks:pt(),dirty:c,skip_bound:!1,root:n.target||b.$$.root};i&&i(l.root);let f=!1;if(l.ctx=t?t(e,n.props||{},(u,v,...g)=>{const z=g.length?g[0]:v;return l.ctx&&o(l.ctx[u],l.ctx[u]=z)&&(!l.skip_bound&&l.bound[u]&&l.bound[u](z),f&&Kt(e,u)),v}):[],l.update(),f=!0,ve(l.before_update),l.fragment=r?r(l.ctx):!1,n.target){if(n.hydrate){const u=It(n.target);l.fragment&&l.fragment.l(u),u.forEach(ee)}else l.fragment&&l.fragment.c();n.intro&&$(e.$$.fragment),ie(e,n.target,n.anchor,n.customElement),Ot()}Ie(b)}class He{$destroy(){le(this,1),this.$destroy=ge}$on(n,t){if(!zt(t))return ge;const r=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return r.push(t),()=>{const o=r.indexOf(t);o!==-1&&r.splice(o,1)}}$set(n){this.$$set&&!Pt(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}const Ae=[];function rt(e,n){return{subscribe:he(e,n).subscribe}}function he(e,n=ge){let t;const r=new Set;function o(c){if(Je(e,c)&&(e=c,t)){const b=!Ae.length;for(const l of r)l[1](),Ae.push(l,e);if(b){for(let l=0;l<Ae.length;l+=2)Ae[l][0](Ae[l+1]);Ae.length=0}}}function s(c){o(c(e))}function i(c,b=ge){const l=[c,b];return r.add(l),r.size===1&&(t=n(o)||ge),c(e),()=>{r.delete(l),r.size===0&&(t(),t=null)}}return{set:o,update:s,subscribe:i}}function bt(e){return Object.prototype.toString.call(e)==="[object Date]"}function ut(e,n,t,r){if(typeof t=="number"||bt(t)){const o=r-t,s=(t-n)/(e.dt||1/60),i=e.opts.stiffness*o,c=e.opts.damping*s,b=(i-c)*e.inv_mass,l=(s+b)*e.dt;return Math.abs(l)<e.opts.precision&&Math.abs(o)<e.opts.precision?r:(e.settled=!1,bt(t)?new Date(t.getTime()+l):t+l)}else{if(Array.isArray(t))return t.map((o,s)=>ut(e,n[s],t[s],r[s]));if(typeof t=="object"){const o={};for(const s in t)o[s]=ut(e,n[s],t[s],r[s]);return o}else throw new Error(`Cannot spring ${typeof t} values`)}}function Tt(e,n={}){const t=he(e),{stiffness:r=.15,damping:o=.8,precision:s=.01}=n;let i,c,b,l=e,f=e,u=1,v=0,g=!1;function z(X,k={}){f=X;const S=b={};return e==null||k.hard||w.stiffness>=1&&w.damping>=1?(g=!0,i=gt(),l=X,t.set(e=f),Promise.resolve()):(k.soft&&(v=1/((k.soft===!0?.5:+k.soft)*60),u=0),c||(i=gt(),g=!1,c=Ct(E=>{if(g)return g=!1,c=null,!1;u=Math.min(u+v,1);const j={inv_mass:u,opts:w,settled:!0,dt:(E-i)*60/1e3},A=ut(j,l,e,f);return i=E,l=e,t.set(e=A),j.settled&&(c=null),!j.settled})),new Promise(E=>{c.promise.then(()=>{S===b&&E()})}))}const w={set:z,update:(X,k)=>z(X(f,e),k),subscribe:t.subscribe,stiffness:r,damping:o,precision:s};return w}const Vt="assets/tile00-5d5331e2.svg",Ut="assets/tile01-e7b4c986.svg",$t="assets/tile02-5ef45a2a.svg",en="assets/tile03-7261b5d7.svg",tn="assets/tile04-d0d49acb.svg",nn="assets/tile05-06e93071.svg",on="assets/tile06-bed8cf84.svg",rn="assets/tile07-d3ed7d20.svg",sn="assets/tile08-03055187.svg",ln="assets/tile09-08030fc9.svg",un="assets/tile10-053d74e0.svg",Me=64,et=32,Te=he(JSON.parse(localStorage.getItem("zoomfactor"))||1);Te.subscribe(e=>localStorage.zoomfactor=JSON.stringify(e));const tt=he(0),We=he(!1),nt=he(JSON.parse(localStorage.getItem("nextid"))||0);nt.subscribe(e=>localStorage.nextid=JSON.stringify(e));const Pe=he({}),ke=he(JSON.parse(localStorage.getItem("pieces"))||[]);ke.subscribe(e=>localStorage.pieces=JSON.stringify(e));const ot=he(JSON.parse(localStorage.getItem("bestsquare"))||0);ot.subscribe(e=>localStorage.bestsquare=JSON.stringify(e));const xe=he(0),Ue=he({}),qe=he(JSON.parse(localStorage.getItem("camerax"))||0),Oe=he(JSON.parse(localStorage.getItem("cameray"))||0);qe.subscribe(e=>localStorage.camerax=JSON.stringify(e));Oe.subscribe(e=>localStorage.cameray=JSON.stringify(e));const Yt=rt("jigsaw"),Xt=rt([{d:1,l:3,u:1,r:1},{d:2,l:3,u:2,r:1},{d:3,l:3,u:1,r:3},{d:1,l:2,u:0,r:2},{d:0,l:2,u:2,r:2},{d:1,l:0,u:0,r:0},{d:2,l:0,u:1,r:3},{d:2,l:1,u:2,r:0},{d:0,l:1,u:2,r:1},{d:2,l:1,u:3,r:3},{d:1,l:3,u:1,r:0}]);rt([{d:1,l:3,u:1,r:1},{d:2,l:3,u:2,r:1},{d:3,l:3,u:1,r:3},{d:1,l:2,u:4,r:2},{d:0,l:2,u:2,r:2},{d:1,l:0,u:0,r:0},{d:2,l:0,u:1,r:3},{d:2,l:1,u:2,r:0},{d:4,l:1,u:2,r:1},{d:2,l:1,u:3,r:3},{d:1,l:3,u:1,r:0}]);const At=rt([Vt,Ut,$t,en,tn,nn,on,rn,sn,ln,un]);function fn(){qe.set(0),Oe.set(0),Te.set(1),Pe.set({}),ke.set([]),nt.set(0),Ue.set({}),xe.set(0)}function cn(e){let n,t=(e[2]<et?"":e[0])+"",r,o,s,i,c,b,l=e[1]&&wt(e);return{c(){n=y("div"),r=R(t),s=J(),l&&l.c(),i=ft(),N(n,"class","piece svelte-rswga4"),N(n,"style",o="width: "+e[13]+"px; height: "+e[3]+"px; background-image: url("+e[11]+"); background-repeat: no-repeat; left: "+0+"px; top: "+e[12]+"px; transform: translate("+(e[4].x+e[15])+"px,"+(e[4].y+e[16])+"px); line-height: "+e[3]+"px; "+(e[1]?"z-index: 20; cursor: move;":"z-index: 2; cursor: auto;")+" visibility: "+(e[7]?"hidden":"visible"))},m(f,u){se(f,n,u),d(n,r),se(f,s,u),l&&l.m(f,u),se(f,i,u),c||(b=[fe(n,"mousedown",e[17]),fe(n,"touchstart",e[18])],c=!0)},p(f,u){u[0]&5&&t!==(t=(f[2]<et?"":f[0])+"")&&ue(r,t),u[0]&112794&&o!==(o="width: "+f[13]+"px; height: "+f[3]+"px; background-image: url("+f[11]+"); background-repeat: no-repeat; left: "+0+"px; top: "+f[12]+"px; transform: translate("+(f[4].x+f[15])+"px,"+(f[4].y+f[16])+"px); line-height: "+f[3]+"px; "+(f[1]?"z-index: 20; cursor: move;":"z-index: 2; cursor: auto;")+" visibility: "+(f[7]?"hidden":"visible"))&&N(n,"style",o),f[1]?l?l.p(f,u):(l=wt(f),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null)},d(f){f&&ee(n),f&&ee(s),l&&l.d(f),f&&ee(i),c=!1,ve(b)}}}function dn(e){let n,t,r,o,s,i=e[8].u+"",c,b,l,f,u,v=e[8].l+"",g,z,w,X=e[8].r+"",k,S,E,j,A,x=e[8].d+"",T,I,Y,W;return{c(){n=y("div"),t=y("table"),r=y("tr"),o=y("td"),s=y("td"),c=R(i),b=y("td"),l=J(),f=y("tr"),u=y("td"),g=R(v),z=y("td"),w=y("td"),k=R(X),S=J(),E=y("tr"),j=y("td"),A=y("td"),T=R(x),I=y("td"),N(t,"class","table svelte-rswga4"),N(n,"class","piece box svelte-rswga4"),p(n,"width",e[2]+"px"),p(n,"height",e[2]+"px"),p(n,"left",0+"px"),p(n,"top",0+"px"),p(n,"line-height",e[2]/4+"px"),p(n,"cursor",e[1]?"move":"auto"),p(n,"transform","translate("+(e[4].x+e[15])+"px,"+(e[4].y+e[16])+"px)")},m(L,M){se(L,n,M),d(n,t),d(t,r),d(r,o),d(r,s),d(s,c),d(r,b),d(t,l),d(t,f),d(f,u),d(u,g),d(f,z),d(f,w),d(w,k),d(t,S),d(t,E),d(E,j),d(E,A),d(A,T),d(E,I),Y||(W=[fe(n,"mousedown",e[17]),fe(n,"touchstart",e[18])],Y=!0)},p(L,M){M[0]&256&&i!==(i=L[8].u+"")&&ue(c,i),M[0]&256&&v!==(v=L[8].l+"")&&ue(g,v),M[0]&256&&X!==(X=L[8].r+"")&&ue(k,X),M[0]&256&&x!==(x=L[8].d+"")&&ue(T,x),M[0]&4&&p(n,"width",L[2]+"px"),M[0]&4&&p(n,"height",L[2]+"px"),M[0]&4&&p(n,"line-height",L[2]/4+"px"),M[0]&2&&p(n,"cursor",L[1]?"move":"auto"),M[0]&98320&&p(n,"transform","translate("+(L[4].x+L[15])+"px,"+(L[4].y+L[16])+"px)")},d(L){L&&ee(n),Y=!1,ve(W)}}}function wt(e){let n;return{c(){n=y("div"),N(n,"class","piece svelte-rswga4"),p(n,"width",e[13]+"px"),p(n,"height",e[3]+"px"),p(n,"background-image","url("+e[11]+")"),p(n,"background-repeat","no-repeat"),p(n,"left",0+"px"),p(n,"top",e[12]+"px"),p(n,"z-index","2"),p(n,"line-height",e[3]+"px"),p(n,"cursor","move"),p(n,"filter","drop-shadow("+e[10]+"px "+e[9]+"px 1px "+(e[6]?"rgba(255,60,71,0.5)":"rgba(39,60,71,0.3)")+")"),p(n,"transform","translate("+(e[4].x+e[15])+"px,"+(e[4].y+e[16])+"px)"),p(n,"visibility",e[7]?"hidden":"visible")},m(t,r){se(t,n,r)},p(t,r){r[0]&8192&&p(n,"width",t[13]+"px"),r[0]&8&&p(n,"height",t[3]+"px"),r[0]&2048&&p(n,"background-image","url("+t[11]+")"),r[0]&4096&&p(n,"top",t[12]+"px"),r[0]&8&&p(n,"line-height",t[3]+"px"),r[0]&1600&&p(n,"filter","drop-shadow("+t[10]+"px "+t[9]+"px 1px "+(t[6]?"rgba(255,60,71,0.5)":"rgba(39,60,71,0.3)")+")"),r[0]&98320&&p(n,"transform","translate("+(t[4].x+t[15])+"px,"+(t[4].y+t[16])+"px)"),r[0]&128&&p(n,"visibility",t[7]?"hidden":"visible")},d(t){t&&ee(n)}}}function an(e){let n;function t(s,i){if(s[14]=="labels")return dn;if(s[14]=="jigsaw")return cn}let r=t(e),o=r&&r(e);return{c(){o&&o.c(),n=ft()},m(s,i){o&&o.m(s,i),se(s,n,i)},p(s,i){r===(r=t(s))&&o?o.p(s,i):(o&&o.d(1),o=r&&r(s),o&&(o.c(),o.m(n.parentNode,n)))},i:ge,o:ge,d(s){o&&o.d(s),s&&ee(n)}}}const pn=0,mn=1,gn=2;function hn(e,n,t){let r,o,s,i,c,b,l,f,u,v,g,z,w,X,k,S,E,j,A,x,T,I,Y,W,L,M,m,q;O(e,ke,a=>t(37,k=a)),O(e,Pe,a=>t(38,S=a)),O(e,Ue,a=>t(39,E=a)),O(e,Xt,a=>t(27,j=a)),O(e,We,a=>t(40,A=a)),O(e,Te,a=>t(28,x=a)),O(e,xe,a=>t(41,T=a)),O(e,ot,a=>t(42,I=a)),O(e,tt,a=>t(29,W=a)),O(e,At,a=>t(30,L=a)),O(e,Yt,a=>t(14,M=a)),O(e,qe,a=>t(15,m=a)),O(e,Oe,a=>t(16,q=a));let{pid:D}=n,{gridx:K}=n,{gridy:U}=n,{type:V}=n,F,ce,te=D,C=Tt({x:K*o,y:U*o},{stiffness:1,damping:1});O(e,C,a=>t(4,Y=a));let _e=!1,ae=[K,U],G=[K,U],be=!1;qt(Ne);function Ne(){me(),ne(Pe,S[[u,v]]=V,S),pe(u,v)}function pe(a,B){let Q=B,Ee=0,Ye=0;for(;Q==B||[a,Q]in S;){let P=a;for(Q==B&&!([a,B]in S)&&(P=a-1);[P,Q]in S;){let we=E[[P,Q+1]]||0,Re=E[[P+1,Q+1]]||0,Dt=E[[P+1,Q]]||0,st=1+Math.min(we,Re,Dt),at=E[[P,Q]];at>Ye&&(Ye=at),ne(Ue,E[[P,Q]]=st,E),st>Ee&&(Ee=st),P--}Q--}if(Ye>Ee){let P=0;for(let we in E){let Re=E[we];Re>P&&(P=Re)}return ne(xe,T=P,T),pn}if(Ee>I)return ne(ot,I=Ee,I),ne(xe,T=Ee,T),gn;if(Ee>T)return ne(xe,T=Ee,T),mn}Te.subscribe(me);function me(a){const B=Z();B!==void 0&&(t(5,C.stiffness=t(5,C.damping=1,C),C),C.set({x:B.gx*Me*x,y:B.gy*Me*x}))}function Le(a,B,Q){Q?(t(5,C.stiffness=.3,C),t(5,C.damping=.7,C)):t(5,C.stiffness=t(5,C.damping=1,C),C),C.set({x:a*o,y:B*o}),F=a*o,t(22,ce=B*o)}function h(a){F=a.clientX,t(22,ce=a.clientY),window.addEventListener("mousemove",ze),window.addEventListener("mouseup",ct),oe()}function oe(){t(5,C.stiffness=t(5,C.damping=1,C),C),t(1,be=!0),delete S[[u,v]],delete E[[u,v]],pe(u,v),G=t(23,ae=[u,v])}function H(a){const B=a.touches;if(A)return;a.preventDefault();const Q=B[0];F=Q.clientX,t(22,ce=Q.clientY),window.addEventListener("touchmove",Se),window.addEventListener("touchcancel",Ze),window.addEventListener("touchend",Ze),oe()}function ze(a){_(a.clientX,a.clientY)}function Se(a){if(A)return;a.preventDefault();const Q=a.changedTouches[0];_(Q.clientX,Q.clientY)}function _(a,B){const Q=a-F,Ee=B-ce;F=a,t(22,ce=B),C.update(P=>({x:P.x+Q,y:P.y+Ee}));const Ye=[u,v];if(!(Ye in S)){t(6,_e=!1),t(23,ae=Ye);let P=[u-1,v];if(P in S){const we=S[P];if(j[we].r!=r.l){t(6,_e=!0);return}}if(P=[u+1,v],P in S){const we=S[P];if(j[we].l!=r.r){t(6,_e=!0);return}}if(P=[u,v-1],P in S){const we=S[P];if(j[we].d!=r.u){t(6,_e=!0);return}}if(P=[u,v+1],P in S){const we=S[P];if(j[we].u!=r.d){t(6,_e=!0);return}}G=ae}}function Z(){te>=k.length&&(te=k.length-1);let a=k[te];for(;te>=0&&a.id!=D;)te--,a=k[te];if(te>=0)return a}function ct(a){window.removeEventListener("mousemove",ze),window.removeEventListener("mouseup",ct),dt()}function Ze(a){a.preventDefault(),window.removeEventListener("touchmove",Se),window.removeEventListener("touchcancel",Ze),window.removeEventListener("touchend",Ze),dt()}function dt(){if(t(1,be=!1),f){Z();const a=k.length-1;let B=k[a];ne(ke,k[te]=B,k),Le(B.gx,B.gy,!1),t(19,D=B.id),k.pop(),ke.set(k),Pe.set(S),Ue.set(E);return}Le(G[0],G[1],!0),ne(Pe,S[G]=V,S),pe(G[0],G[1]),Z(),ne(ke,k[te]={id:D,type:V,gx:G[0],gy:G[1]},k)}return e.$$set=a=>{"pid"in a&&t(19,D=a.pid),"gridx"in a&&t(20,K=a.gridx),"gridy"in a&&t(21,U=a.gridy),"type"in a&&t(0,V=a.type)},e.$$.update=()=>{e.$$.dirty[0]&134217729&&t(8,r=j[V]),e.$$.dirty[0]&268435456&&t(2,o=Me*x),e.$$.dirty[0]&4&&t(13,s=o*68/60),e.$$.dirty[0]&4&&t(3,i=o*75.16/60),e.$$.dirty[0]&12&&t(12,c=o-i),e.$$.dirty[0]&1073741825&&t(11,b=L[V]),e.$$.dirty[0]&536870912&&t(26,l=W),e.$$.dirty[0]&71303170&&t(7,f=be&&ce>l),e.$$.dirty[0]&20&&(u=Math.round(Y.x/o)),e.$$.dirty[0]&20&&(v=Math.round(Y.y/o)),e.$$.dirty[0]&8388612&&t(25,g=ae[0]*o),e.$$.dirty[0]&8388612&&t(24,z=ae[1]*o),e.$$.dirty[0]&33554448&&t(10,w=g-Y.x),e.$$.dirty[0]&16777232&&t(9,X=z-Y.y)},[V,be,o,i,Y,C,_e,f,r,X,w,b,c,s,M,m,q,h,H,D,K,U,ce,ae,z,g,l,j,x,W,L]}class _n extends He{constructor(n){super(),Ge(this,n,hn,an,Je,{pid:19,gridx:20,gridy:21,type:0},null,[-1,-1])}}function bn(e){let n,t,r,o,s,i,c,b;return{c(){n=y("div"),t=y("img"),o=J(),s=y("div"),i=R(e[0]),N(t,"class","image nodrag svelte-1a15y55"),N(t,"draggable","false"),mt(t.src,r=e[11])||N(t,"src",r),N(s,"class","imagelabel svelte-1a15y55"),N(n,"class","piece nodrag static svelte-1a15y55"),N(n,"draggable","false"),p(n,"z-index","4"),p(n,"cursor","auto")},m(l,f){se(l,n,f),d(n,t),d(n,o),d(n,s),d(s,i),c||(b=[fe(n,"mousedown",e[17]),fe(n,"touchstart",e[18])],c=!0)},p(l,f){f[0]&2048&&!mt(t.src,r=l[11])&&N(t,"src",r),f[0]&1&&ue(i,l[0])},d(l){l&&ee(n),c=!1,ve(b)}}}function wn(e){let n,t,r,o,s,i=e[8].u+"",c,b,l,f,u,v=e[8].l+"",g,z,w,X=e[8].r+"",k,S,E,j,A,x=e[8].d+"",T,I,Y,W;return{c(){n=y("div"),t=y("table"),r=y("tr"),o=y("td"),s=y("td"),c=R(i),b=y("td"),l=J(),f=y("tr"),u=y("td"),g=R(v),z=y("td"),w=y("td"),k=R(X),S=J(),E=y("tr"),j=y("td"),A=y("td"),T=R(x),I=y("td"),N(t,"class","table svelte-1a15y55"),N(n,"class","piece box static svelte-1a15y55"),p(n,"width",e[1]+"px"),p(n,"height",e[1]+"px"),p(n,"line-height",e[1]/4+"px"),p(n,"cursor",e[6]?"move":"auto"),p(n,"z-index","4")},m(L,M){se(L,n,M),d(n,t),d(t,r),d(r,o),d(r,s),d(s,c),d(r,b),d(t,l),d(t,f),d(f,u),d(u,g),d(f,z),d(f,w),d(w,k),d(t,S),d(t,E),d(E,j),d(E,A),d(A,T),d(E,I),Y||(W=[fe(n,"mousedown",e[17]),fe(n,"touchstart",e[17])],Y=!0)},p(L,M){M[0]&256&&i!==(i=L[8].u+"")&&ue(c,i),M[0]&256&&v!==(v=L[8].l+"")&&ue(g,v),M[0]&256&&X!==(X=L[8].r+"")&&ue(k,X),M[0]&256&&x!==(x=L[8].d+"")&&ue(T,x),M[0]&2&&p(n,"width",L[1]+"px"),M[0]&2&&p(n,"height",L[1]+"px"),M[0]&2&&p(n,"line-height",L[1]/4+"px"),M[0]&64&&p(n,"cursor",L[6]?"move":"auto")},d(L){L&&ee(n),Y=!1,ve(W)}}}function yt(e){let n,t=(e[1]<et?"":e[0])+"",r;return{c(){n=y("div"),r=R(t),N(n,"class","piece svelte-1a15y55"),p(n,"width",e[13]+"px"),p(n,"height",e[2]+"px"),p(n,"background-image","url("+e[11]+")"),p(n,"background-size",e[13]+"px "+e[2]+"px"),p(n,"background-repeat","no-repeat"),p(n,"position","absolute"),p(n,"left",0+"px"),p(n,"top",e[12]+"px"),p(n,"z-index","5"),p(n,"line-height",e[2]+"px"),p(n,"cursor","move"),p(n,"filter","drop-shadow("+e[10]+"px "+e[9]+"px 1px "+(e[5]?"rgba(255,60,71,0.5)":"rgba(39,60,71,0.3)")+")"),p(n,"transform","translate("+(e[3].x+e[15])+"px,"+(e[3].y+e[14])+"px)"),p(n,"visibility",e[7]?"hidden":"visible")},m(o,s){se(o,n,s),d(n,r)},p(o,s){s[0]&3&&t!==(t=(o[1]<et?"":o[0])+"")&&ue(r,t),s[0]&8192&&p(n,"width",o[13]+"px"),s[0]&4&&p(n,"height",o[2]+"px"),s[0]&2048&&p(n,"background-image","url("+o[11]+")"),s[0]&8196&&p(n,"background-size",o[13]+"px "+o[2]+"px"),s[0]&4096&&p(n,"top",o[12]+"px"),s[0]&4&&p(n,"line-height",o[2]+"px"),s[0]&1568&&p(n,"filter","drop-shadow("+o[10]+"px "+o[9]+"px 1px "+(o[5]?"rgba(255,60,71,0.5)":"rgba(39,60,71,0.3)")+")"),s[0]&49160&&p(n,"transform","translate("+(o[3].x+o[15])+"px,"+(o[3].y+o[14])+"px)"),s[0]&128&&p(n,"visibility",o[7]?"hidden":"visible")},d(o){o&&ee(n)}}}function yn(e){let n,t;function r(c,b){if(c[16]=="labels")return wn;if(c[16]=="jigsaw")return bn}let o=r(e),s=o&&o(e),i=e[6]&&yt(e);return{c(){s&&s.c(),n=J(),i&&i.c(),t=ft()},m(c,b){s&&s.m(c,b),se(c,n,b),i&&i.m(c,b),se(c,t,b)},p(c,b){o===(o=r(c))&&s?s.p(c,b):(s&&s.d(1),s=o&&o(c),s&&(s.c(),s.m(n.parentNode,n))),c[6]?i?i.p(c,b):(i=yt(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:ge,o:ge,d(c){s&&s.d(c),c&&ee(n),i&&i.d(c),c&&ee(t)}}}function vn(e,n,t){let r,o,s,i,c,b,l,f,u,v,g,z,w,X,k,S,E,j,A,x,T,I,Y,W,L,M;O(e,ke,h=>t(34,k=h)),O(e,nt,h=>t(35,S=h)),O(e,Xt,h=>t(24,E=h)),O(e,Pe,h=>t(36,j=h)),O(e,We,h=>t(37,A=h)),O(e,Oe,h=>t(14,x=h)),O(e,qe,h=>t(15,T=h)),O(e,tt,h=>t(25,Y=h)),O(e,At,h=>t(26,W=h)),O(e,Te,h=>t(27,L=h)),O(e,Yt,h=>t(16,M=h));let{type:m}=n,q,D,K=Tt({x:0,y:0},{stiffness:1,damping:1});O(e,K,h=>t(3,I=h));let U=!1,V=[0,0],F=[0,0],ce=!1,te=!1;function C(h){window.addEventListener("mousemove",G),window.addEventListener("mouseup",pe),ae(h.clientX,h.clientY)}function _e(h){if(A)return;h.preventDefault(),window.addEventListener("touchmove",be),window.addEventListener("touchcancel",me),window.addEventListener("touchend",me);const H=h.touches[0];ae(H.clientX,H.clientY)}function ae(h,oe){t(4,K.stiffness=t(4,K.damping=1,K),K),q=h,t(19,D=oe),K.set({x:q-o/2-T,y:D-o/2-x}),t(6,ce=!0),te=!1,F=t(20,V=[u,v])}function G(h){Ne(h.clientX,h.clientY)}function be(h){if(A)return;h.preventDefault();const H=h.changedTouches[0];Ne(H.clientX,H.clientY)}function Ne(h,oe){const H=h-q,ze=oe-D;q=h,t(19,D=oe),K.update(_=>({x:_.x+H,y:_.y+ze}));const Se=[u,v];if(!(Se in j)){t(5,U=!1),t(20,V=Se);let _=[u-1,v];if(_ in j){const Z=j[_];if(E[Z].r!=r.l){t(5,U=!0);return}}if(_=[u+1,v],_ in j){const Z=j[_];if(E[Z].l!=r.r){t(5,U=!0);return}}if(_=[u,v-1],_ in j){const Z=j[_];if(E[Z].d!=r.u){t(5,U=!0);return}}if(_=[u,v+1],_ in j){const Z=j[_];if(E[Z].u!=r.d){t(5,U=!0);return}}F=V,te=!0}}function pe(h){window.removeEventListener("mousemove",G),window.removeEventListener("mouseup",pe),Le()}function me(h){h.preventDefault(),window.removeEventListener("touchmove",be),window.removeEventListener("touchcancel",me),window.removeEventListener("touchend",me),Le()}function Le(){if(t(6,ce=!1),f||!te)return;const h=F[0],oe=F[1],H=S;ne(nt,S++,S),k.push({id:H,type:m,gx:h,gy:oe}),ke.set(k)}return e.$$set=h=>{"type"in h&&t(0,m=h.type)},e.$$.update=()=>{e.$$.dirty[0]&16777217&&t(8,r=E[m]),e.$$.dirty[0]&134217728&&t(1,o=Me*L),e.$$.dirty[0]&2&&t(13,s=o*68/60),e.$$.dirty[0]&2&&t(2,i=o*75.16/60),e.$$.dirty[0]&6&&t(12,c=o-i),e.$$.dirty[0]&67108865&&t(11,b=W[m]),e.$$.dirty[0]&33554432&&t(23,l=Y),e.$$.dirty[0]&8912896&&t(7,f=D>l),e.$$.dirty[0]&10&&(u=Math.round(I.x/o)),e.$$.dirty[0]&10&&(v=Math.round(I.y/o)),e.$$.dirty[0]&1048578&&t(22,g=V[0]*o),e.$$.dirty[0]&1048578&&t(21,z=V[1]*o),e.$$.dirty[0]&4194312&&t(10,w=g-I.x),e.$$.dirty[0]&2097160&&t(9,X=z-I.y)},[m,o,i,I,K,U,ce,f,r,X,w,b,c,s,x,T,M,C,_e,D,V,z,g,l,E,Y,W,L]}class ye extends He{constructor(n){super(),Ge(this,n,vn,yn,Je,{type:0},null,[-1,-1])}}function En(e){let n,t,r,o,s,i,c,b,l,f,u,v,g,z,w,X,k,S,E,j,A,x,T,I,Y,W,L,M,m,q,D,K,U,V,F,ce,te,C,_e,ae,G,be,Ne,pe,me,Le,h,oe,H,ze,Se;return r=new ye({props:{type:"0"}}),s=new ye({props:{type:"1"}}),c=new ye({props:{type:"2"}}),l=new ye({props:{type:"3"}}),u=new ye({props:{type:"4"}}),g=new ye({props:{type:"5"}}),w=new ye({props:{type:"6"}}),k=new ye({props:{type:"7"}}),E=new ye({props:{type:"8"}}),A=new ye({props:{type:"9"}}),T=new ye({props:{type:"10"}}),{c(){n=y("div"),t=y("div"),de(r.$$.fragment),o=J(),de(s.$$.fragment),i=J(),de(c.$$.fragment),b=J(),de(l.$$.fragment),f=J(),de(u.$$.fragment),v=J(),de(g.$$.fragment),z=J(),de(w.$$.fragment),X=J(),de(k.$$.fragment),S=J(),de(E.$$.fragment),j=J(),de(A.$$.fragment),x=J(),de(T.$$.fragment),I=J(),Y=y("div"),W=y("button"),W.textContent="Reset",L=J(),M=y("div"),m=y("div"),q=R("Maximal square: "),D=R(e[1]),K=R("x"),U=R(e[1]),V=J(),F=y("div"),ce=R("Best: "),te=R(e[2]),C=R("x"),_e=R(e[2]),ae=J(),G=y("div"),be=y("div"),be.textContent="CLEAR EVERYTHING?",Ne=J(),pe=y("div"),me=y("button"),me.textContent="Reset",Le=J(),h=y("button"),h.textContent="Cancel",N(W,"id","settings"),N(W,"class","button svelte-96j2t6"),N(Y,"class","tool svelte-96j2t6"),N(t,"class","toolcontainer nodrag svelte-96j2t6"),N(t,"draggable","false"),N(m,"class","score svelte-96j2t6"),N(F,"class","score svelte-96j2t6"),N(M,"class","hiscore svelte-96j2t6"),N(n,"class","toolbar svelte-96j2t6"),N(n,"draggable","false"),N(be,"class","text svelte-96j2t6"),N(me,"class","button svelte-96j2t6"),N(h,"class","button svelte-96j2t6"),N(pe,"class","buttons svelte-96j2t6"),N(G,"class",oe="resetdialog"+(e[0]?" show":"")+" svelte-96j2t6")},m(_,Z){se(_,n,Z),d(n,t),ie(r,t,null),d(t,o),ie(s,t,null),d(t,i),ie(c,t,null),d(t,b),ie(l,t,null),d(t,f),ie(u,t,null),d(t,v),ie(g,t,null),d(t,z),ie(w,t,null),d(t,X),ie(k,t,null),d(t,S),ie(E,t,null),d(t,j),ie(A,t,null),d(t,x),ie(T,t,null),d(t,I),d(t,Y),d(Y,W),d(n,L),d(n,M),d(M,m),d(m,q),d(m,D),d(m,K),d(m,U),d(M,V),d(M,F),d(F,ce),d(F,te),d(F,C),d(F,_e),se(_,ae,Z),se(_,G,Z),d(G,be),d(G,Ne),d(G,pe),d(pe,me),d(pe,Le),d(pe,h),H=!0,ze||(Se=[fe(W,"click",e[3]),fe(me,"click",e[5]),fe(h,"click",e[4])],ze=!0)},p(_,[Z]){(!H||Z&2)&&ue(D,_[1]),(!H||Z&2)&&ue(U,_[1]),(!H||Z&4)&&ue(te,_[2]),(!H||Z&4)&&ue(_e,_[2]),(!H||Z&1&&oe!==(oe="resetdialog"+(_[0]?" show":"")+" svelte-96j2t6"))&&N(G,"class",oe)},i(_){H||($(r.$$.fragment,_),$(s.$$.fragment,_),$(c.$$.fragment,_),$(l.$$.fragment,_),$(u.$$.fragment,_),$(g.$$.fragment,_),$(w.$$.fragment,_),$(k.$$.fragment,_),$(E.$$.fragment,_),$(A.$$.fragment,_),$(T.$$.fragment,_),H=!0)},o(_){re(r.$$.fragment,_),re(s.$$.fragment,_),re(c.$$.fragment,_),re(l.$$.fragment,_),re(u.$$.fragment,_),re(g.$$.fragment,_),re(w.$$.fragment,_),re(k.$$.fragment,_),re(E.$$.fragment,_),re(A.$$.fragment,_),re(T.$$.fragment,_),H=!1},d(_){_&&ee(n),le(r),le(s),le(c),le(l),le(u),le(g),le(w),le(k),le(E),le(A),le(T),_&&ee(ae),_&&ee(G),ze=!1,ve(Se)}}}function kn(e,n,t){let r,o;O(e,xe,f=>t(1,r=f)),O(e,ot,f=>t(2,o=f));let s=!1;function i(){t(0,s=!0),window.addEventListener("mouseup",b)}function c(){t(0,s=!1),window.removeEventListener("mouseup",b)}function b(f){c()}function l(){fn(),c()}return[s,r,o,i,c,l]}class Ln extends He{constructor(n){super(),Ge(this,n,kn,En,Je,{})}}function vt(e,n,t){const r=e.slice();return r[28]=n[t],r}function Et(e){let n,t;return n=new _n({props:{pid:e[28].id,type:e[28].type,gridx:e[28].gx,gridy:e[28].gy}}),{c(){de(n.$$.fragment)},m(r,o){ie(n,r,o),t=!0},p(r,o){const s={};o&4&&(s.pid=r[28].id),o&4&&(s.type=r[28].type),o&4&&(s.gridx=r[28].gx),o&4&&(s.gridy=r[28].gy),n.$set(s)},i(r){t||($(n.$$.fragment,r),t=!0)},o(r){re(n.$$.fragment,r),t=!1},d(r){le(n,r)}}}function zn(e){let n,t,r,o,s,i,c,b,l,f=e[2],u=[];for(let g=0;g<f.length;g+=1)u[g]=Et(vt(e,f,g));const v=g=>re(u[g],1,1,()=>{u[g]=null});return i=new Ln({}),{c(){n=y("div"),t=y("div"),o=J();for(let g=0;g<u.length;g+=1)u[g].c();s=J(),de(i.$$.fragment),N(t,"class","background nodrag svelte-1wvpcpf"),p(t,"cursor",e[0]?"move":"auto"),$e(()=>e[6].call(t)),N(n,"class","canvas svelte-1wvpcpf"),N(n,"draggable","false")},m(g,z){se(g,n,z),d(n,t),r=Bt(t,e[6].bind(t)),d(n,o);for(let w=0;w<u.length;w+=1)u[w].m(n,null);d(n,s),ie(i,n,null),c=!0,b||(l=[fe(t,"mousedown",e[3]),fe(t,"touchstart",e[4])],b=!0)},p(g,[z]){if((!c||z&1)&&p(t,"cursor",g[0]?"move":"auto"),z&4){f=g[2];let w;for(w=0;w<f.length;w+=1){const X=vt(g,f,w);u[w]?(u[w].p(X,z),$(u[w],1)):(u[w]=Et(X),u[w].c(),$(u[w],1),u[w].m(n,s))}for(Ft(),w=f.length;w<u.length;w+=1)v(w);Qt()}},i(g){if(!c){for(let z=0;z<f.length;z+=1)$(u[z]);$(i.$$.fragment,g),c=!0}},o(g){u=u.filter(Boolean);for(let z=0;z<u.length;z+=1)re(u[z]);re(i.$$.fragment,g),c=!1},d(g){g&&ee(n),r(),Jt(u,g),le(i),b=!1,ve(l)}}}function kt(e,n){const t=e.clientX-n.clientX,r=e.clientY-n.clientY;return Math.sqrt(t*t+r*r)}function Sn(e,n,t){let r,o,s,i,c,b;O(e,We,m=>t(14,r=m)),O(e,Oe,m=>t(15,o=m)),O(e,qe,m=>t(16,s=m)),O(e,Te,m=>t(5,i=m)),O(e,tt,m=>t(1,c=m)),O(e,ke,m=>t(2,b=m));let l,f,u=!1,v,g,z,w;function X(m){l=m.clientX,f=m.clientY,t(0,u=!0),window.addEventListener("mousemove",E),window.addEventListener("mouseup",I)}function k(m){if(m.preventDefault(),m.touches.length<2)return;ne(We,r=!0,r),t(0,u=!1),v=i;const q=m.touches[0],D=m.touches[1];z=(q.clientX+D.clientX)/2,w=(q.clientY+D.clientY)/2,g=kt(q,D),window.addEventListener("touchmove",x),window.addEventListener("touchcancel",Y),window.addEventListener("touchend",Y)}function S(m){if(m.touches.length>1)return;m.preventDefault();const q=m.touches[0];l=q.clientX,f=q.clientY,t(0,u=!0),window.addEventListener("touchmove",x),window.addEventListener("touchcancel",Y),window.addEventListener("touchend",Y)}function E(m){const q=m.clientX-l,D=m.clientY-f;l=m.clientX,f=m.clientY,T(q,D)}function j(m){const q=(z-s)/(Me*i),D=(w-o)/(Me*i);ne(qe,s=z-q*(Me*v*m),s),ne(Oe,o=w-D*(Me*v*m),o),ne(Te,i=v*m,i)}function A(m){z=m.clientX,w=m.clientY;let q=-.001*m.deltaY;v=i,q>.1&&(q=.1),q<-.1&&(q=-.1),j(1+q)}function x(m){if(m.preventDefault(),r){if(m.touches.length<2)return;const U=m.touches[0],V=m.touches[1],F=kt(U,V);j(F/g);return}const q=m.touches[0],D=q.clientX-l,K=q.clientY-f;l=q.clientX,f=q.clientY,T(D,K)}function T(m,q){ne(qe,s+=m,s),ne(Oe,o+=q,o)}function I(m){t(0,u=!1),window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",I)}function Y(m){m.preventDefault(),ne(We,r=!1,r),t(0,u=!1),window.removeEventListener("touchmove",x),window.removeEventListener("touchcancel",Y),window.removeEventListener("touchend",Y)}function W(){window.addEventListener("touchstart",k),window.addEventListener("wheel",A)}function L(){window.removeEventListener("touchstart",k),window.removeEventListener("wheel",A)}qt(W),Gt(L);function M(){c=this.clientHeight,tt.set(c)}return e.$$.update=()=>{e.$$.dirty&32},[u,c,b,X,S,i,M]}class Mn extends He{constructor(n){super(),Ge(this,n,Sn,zn,Je,{})}}function Nn(e){let n,t,r;return t=new Mn({}),{c(){n=y("main"),de(t.$$.fragment)},m(o,s){se(o,n,s),ie(t,n,null),r=!0},p:ge,i(o){r||($(t.$$.fragment,o),r=!0)},o(o){re(t.$$.fragment,o),r=!1},d(o){o&&ee(n),le(t)}}}class jn extends He{constructor(n){super(),Ge(this,n,null,Nn,Je,{})}}new jn({target:document.getElementById("app")});
